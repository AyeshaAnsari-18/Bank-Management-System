<!DOCTYPE html> 
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Form</title>
   <link rel="stylesheet" href="formstyle.css">
</head>
<body>
   <div class="wrapper">
      <div class="title">
         <span id="formTitle">Login Form</span>
      </div>

      <!-- Success Message -->
      <div id="successMessage" class="success-message" style="display: none;">
         Registration successful! You can now log in with your Customer ID and password.
      </div>

      <!-- Error Message for Incorrect Password or Invalid Customer ID -->
      <div id="errorMessage" class="error-message" style="display: none; color: red;"></div>

      <!-- Login Form -->
      <form id="loginForm" action="authentication.php" method="POST" style="display: block;" onsubmit="return validateLogin()">
         <div class="field">
            <input type="text" id="customer_id" name="customer_id" required placeholder=" ">
            <label>Customer ID</label>
         </div>
         <div class="field">
            <input type="email" id="email" name="email" required placeholder=" ">
            <label>Email Address</label>
         </div>
         <div class="field">
            <input type="password" id="password" name="password" required minlength="8" placeholder=" ">
            <label>Password</label>
         </div>
         <div class="content">
            <div class="checkbox">
               <input type="checkbox" id="remember-me">
               <label for="remember-me">Remember me</label>
            </div>
         </div>
         <div class="field">
            <input type="submit" value="Login">
         </div>
         <div class="signup-link">
            Not a user? <a href="#" onclick="toggleForm('signup')">Signup now</a>
         </div>
      </form>

      <!-- Signup Form -->
      <form id="signupForm" action="signup.php" method="POST" style="display: none;" onsubmit="return validateSignup()">
         <div class="field">
            <input type="text" name="customer_id" required placeholder=" ">
            <label>Customer ID</label>
         </div>
         <div class="field">
            <input type="text" name="name" required placeholder=" ">
            <label>Full Name</label>
         </div>
         <div class="field">
            <input type="email" name="email" required placeholder=" ">
            <label>Email Address</label>
         </div>
         <div class="field">
            <input type="text" name="address" required placeholder=" ">
            <label>Address</label>
         </div>
         <div class="field">
            <input type="date" name="dob" required placeholder=" ">
            <label>Date of Birth</label>
         </div>
         <div class="field">
            <input type="tel" name="phone" required placeholder=" ">
            <label>Phone Number</label>
         </div>
         <div class="field">
            <input type="password" name="signup_password" required minlength="8" placeholder=" ">
            <label>Password</label>
         </div>
         <div class="field">
            <input type="password" name="confirm_password" required minlength="8" placeholder=" ">
            <label>Confirm Password</label>
         </div>
         <div class="field">
            <input type="submit" value="Signup">
         </div>
         <div class="signup-link">
            Already a user? <a href="#" onclick="toggleForm('login')">Login now</a>
         </div>
      </form>

   </div>

   <script>
      // Check URL for success or error message
      window.onload = function() {
         const urlParams = new URLSearchParams(window.location.search);
         const successMessage = document.getElementById("successMessage");
         const errorMessage = document.getElementById("errorMessage");

         // Display success message if user has just registered
         if (urlParams.get("success") === "1") {
            successMessage.style.display = "block";
         }

         // Display appropriate error messages based on the URL parameter
         const error = urlParams.get("error");
         if (error) {
            errorMessage.style.display = "block";
            if (error === "incorrect_password") {
               errorMessage.textContent = "Incorrect password. Please try again.";
            } else if (error === "invalid_customer_id") {
               errorMessage.textContent = "Invalid Customer ID. Please try again.";
            } else if (error === "missing_fields") {
               errorMessage.textContent = "Please enter both Customer ID and password.";
            }
         }
      };

      function toggleForm(form) {
         const loginForm = document.getElementById("loginForm");
         const signupForm = document.getElementById("signupForm");
         const formTitle = document.getElementById("formTitle");

         if (form === "signup") {
            loginForm.style.display = "none";
            signupForm.style.display = "block";
            formTitle.textContent = "Signup Form";
         } else {
            loginForm.style.display = "block";
            signupForm.style.display = "none";
            formTitle.textContent = "Login Form";
         }
      }

      function validateLogin() {
         const customerId = document.getElementById("customer_id").value;
         const email = document.getElementById("email").value;
         const password = document.getElementById("password").value;

         if (customerId === "" || email === "" || password === "") {
            alert("Please fill in all fields.");
            return false;
         }
         return true;
      }

      function validateSignup() {
         const customerId = document.querySelector("[name='customer_id']").value;
         const name = document.querySelector("[name='name']").value;
         const email = document.querySelector("[name='email']").value;
         const address = document.querySelector("[name='address']").value;
         const dob = document.querySelector("[name='dob']").value;
         const phone = document.querySelector("[name='phone']").value;
         const password = document.querySelector("[name='signup_password']").value;
         const confirmPassword = document.querySelector("[name='confirm_password']").value;

         if (!customerId || !name || !email || !address || !dob || !phone || !password || !confirmPassword) {
            alert("Please fill in all required fields.");
            return false;
         }

         if (password !== confirmPassword) {
            alert("Passwords do not match.");
            return false;
         }

         return true;
      }
   </script>
</body>
</html>